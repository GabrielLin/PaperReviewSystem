第卷第期计算机工程人工智能及识别技术文章编号年月文献标志码中图分类号微博文本的句向量表示及相似度计算方法研究段旭磊张仰森孙祎卓北京信息科技大学智能信息处理研究所北京摘要在框架内针对微博文本的特点提出采用词向量或高维词库映射计算句向量的方法以种算法构造句向量即采用对微博文本进行扩展后以方法表示句向量将句子中每个词的词向量相加形成句向量构建高维词库将句子中的每个词映射到高维词库形成句向量对比种训练句向量的方法选出最适合微博领域的模型实验结果表明采用高维词库映射的方法对微博的句向量计算的效果最佳关键词微博文本相似度计算词向量高维词库句向量中文引用格式段旭磊张仰森孙祎卓微博文本的句向量表示及相似度计算方法研究计算机工程英文引用格式概述微博文本作为典型的短文本其文本长度一般不超过字并且微博文本具有很强的随意性大部分微博文本呈现碎片化表达很多微博仅有几个字到十几个字甚至有些微博只有几个表情或标点符号比如等另外微博中存在大量新词和网络用语在不了解发布者心情或者上下文的情况下大部分微博是无法理解的给微博处理带来很大难度因此微博文本与传统媒体文本的处理方法之间有着较大的区别与此同时作为新媒体短文本的代表微博文本中蕴含着巨大的研究价值和商业价值有必要对微博文本的处理方法进行深入研究是一个将词语转换成词向量的工具不同于传统的向量空间模型其使用的是的词向量表示方式它把对文本内容的处理简化为向量空间中的向量运算并通过计算向量空间上的相似度来表示文本语义上的相似度极大地提高了效率在大量的短文本实验中表现出了优秀的处理能力可以为短文本数据寻求更加深层次的特征表示训练后的词向量可以处理很多自然语言的工作如分类聚类求同义词词基金项目国家自然科学基金北京市属高等学校创新团队建设与教师职业发展计划项目作者简介段旭磊男硕士研究生主研方向为中文信息处理数据挖掘机器学习张仰森通信作者教授博士后孙祎卓硕士研究生收稿日期修回日期计算机性分析语义分析机器翻译等在句向量的研究中由于句子长度不一现有方法都是截取句子的部分信息将句子映射为定长向量本文在框架内提出采用词向量或高维词库映射计算句向量的方法从而将微博文本采用句向量表示并与现有流行相似度计算方法进行比较寻找更适合微博文本的处理方法另外根据微博文本稀疏的特点利用词向量对短文本进行扩展并验证了扩展后文本相似度计算的效果相关研究根据自然语言的粒度大小可以将其分为字词短语句子段节章和文档等在一般情况下字词是自然语言处理的最小单位大部分的研究都需要从字词出发根据文本的不同领域特点对文本进行相应处理微博文本更加接近口语将微博文本表示成字词的过程比较困难对微博文本的分词等预处理更加复杂也增大了微博文本相似度计算的难度文本的相似度计算可以分为基于统计的相似度计算和基于语义的相似度计算研究文本的相似度首先是解决如何表示文本的问题在这个过程中用表示文本的方法普遍受到人们的认可其在知识表示方法上具有较大优势在中通过将文本内容形式化为多维空间中的点从而将对文本内容的处理转换为向量空间中向量的运算大大降低了问题的复杂度在将文本用向量表示的过程中一般需要对文本特征项加权加权是针对每个关键词对文本特征的体现效果大小不同而设置的机制权值计算一般参照公式其中也有借助先验知识来衡量特征的权重但是建立在假定关键词之间线性无关的基础上其只考虑了词在上下文中的统计特性没有考虑词本身的语义特性因此具有很大的局限性基于此很多学者结合语义对文本或者词语的相似度计算进行了大量研究其中基于知网和基于的研究是语义相似度计算最常见的方法随着深度学习研究的深入模型词之间无关联的缺点也更加突出在深度学习中一般用来描述一个词常被称为或也就是俗称的词向量词向量由在年提出后来被发展并由于的开源而被人熟知在国内外的研究中采用进行文本研究越来越普遍的基本思想是通过训练将每个词映工程年月日射成高维实数向量通过词之间的距离如余弦相似度欧氏距离等来判断它们之间的语义相似度核心技术是根据词频采用编码使得所有词频相似的词隐藏层激活的内容基本一致出现频率越高的词语它们激活的隐藏层数目越少有效地降低了计算的复杂度的高效性使其受到研究人员和技术人员的欢迎正如文献中提出一个优化的单机版本训练上千亿词的时间不会超过一天与潜在语义分析潜在狄立克雷分配的经典过程相比利用了词的上下文语义信息更加丰富图为词向量的学习框架其通过输入上下文映射成的矩阵预测第个单词图词向量学习框架在近期的相关研究中文献介绍了训练句向量的方法是从未标记数据得到因此可以应用在没有太多标签的数据上并且在中每篇文档映射在一个唯一的向量上另外解决了没有顺序的问题极大地降低了表示的维度图为句向量的学习框架图句向量学习框架相比于句向量的区别点有以下点训练过程中新增了即训练语料中每个句子都有一个唯一的和普通的一样也是先映射成一个向量即与的维数虽一样但是来自于个不同的向量空间在之后的计算中和累加或者连接起来作为输出层的输入在一个句子或者文档的训练过程中保持不变共享着第卷第期段旭磊张仰森孙祎卓微博文本的句向量表示及相似度计算方法研究同一个相当于每次在预测单词的概率时都利用了整个句子的语义在预测阶段给待预测的句子新分配一个词向量和输出层的参数保持训练阶段得到的参数不变重新利用梯度下降训练待预测的句子待收敛后即得到待预测句子的目前利用进行句向量研究的方法还比较少本文将提出计算句向量的种新方法通过词向量或高维词库映射的方法等计算出句向量从而取代的表示方法计算句子相似度此外在针对微博等短文本的相似度研究中由于文本较短研究者一般采用知网等外部知识库进行扩展如将知网和同义词词林结合进行扩展的研究但这些方法适应性较差大多数不能取得很好的效果当然还有采用词向量模型进行特征空间优化的同义词扩展方法如北京邮电大学的张为泰采用和词向量结合的方法对短文本进行扩展并利用扩展后的语料进行分类实验取得了很好的效果然而这些研究都停留在对短文本的表面扩展没有具体分析如何将扩展后的短文本采用句向量表示从而对整个句子进行分析算法设计算法研究的基础是训练的领域词向量而文中的句向量是指每条微博文本处理后形成的高维向量本文利用训练的模型设计了种句向量的计算方法进行文本相似度的计算对文本进行扩展后结合表示短文本传统的利用计算文本相似度的方法一般都未考虑文本长短对文本相似度结果的影响但对于微博文本而言这种计算方法的效果很不理想针对微博文本高维稀疏的特点本文采用对其进行扩展然后利用对扩展后的文本进行向量表示这样就避免了在对生微博文本处理时大部分特征为零的问题从而提高对微博文本相似度计算的适用性上文提到的扩展是指将要计算的文本分词去停用词等预处理后对文本的词集合进行扩展中指词频即某个词在文本中出现的次数词语出现的次数越高表明其在文本中的作用越大指逆文档频率即如果这个词在所有文本集合中出现的次数越多说明这个词的区分能力越低越不能反映文本特性在微博文本的处理过程中如果直接用进行表示稀疏性太大所以需要对文本进行扩展算法步骤如下步骤将文本预处理后的文本和采用词集合和表示步骤采用工具扩展文本中的每一个词在扩展时选取和每个词语相似度最高的词用来扩展形成新的词集和步骤使用值分别计算词集和中的前个关键词合并个文本的关键词形成样本向量词集步骤分别计算和在样本向量词集中的词语的频率形成词频句向量和步骤计算和的余弦相似度即文本中每个词语的词向量直接相加得到句向量在进行句向量计算的过程中将预处理后形成的词集合中的每个词利用得到词向量然后将每个词向量相加用以表示该文本的句向量设句子有个词表示原句子经过处理后得到的句向量分布表示第个句子的第个词的词向量表示每个词向量的维度表示维向量中的第个值则词向量相加后得到的句向量如式所示得到归一化向量后文本句子的相似度用式表示算法步骤如下步骤将文本预处理后的文本和采用词集合和表示步骤采用获得文本中每一个词的词向量分别将每个文本中每个词的词向量相加即采用式获得句向量和步骤利用式计算和的相似度即构建高维词库利用词库映射句子语义从而形成句向量据统计在文章的写作中几千甚至几百个词就足以描述大多数文章的内容并且常用词语不会超过一万基于这个思想本文提出采用词库映射的方法将微博文本的意思映射到常用的几千个词中首先构建一个具有个词的常用词词库并附加每个词的词向量从而将每一个文本映射成一个维的向量向量的每一维是词库中与该维对应的词语和文本中每个词语的相似度的最大值比如我喜欢用苹果手机这句话对应的向量会在三星手机诺基亚小米手机电脑等词上有比较高的得分而如我喜欢吃苹果对应的向量会在苹果树计算机荔枝香蕉等词上有较高得分在词语相似度计算中此思想相较于基于上下文的方法将赋予每个词语更加丰富的语义分布这种做法对于解决的稀疏性问题效果较好使用模型计算个词语和之间的相似度表示维词库中第个词的词向量表示第个文本中第个词向量设文本长度为表示句子经过分词等预处理后具有个词最后采用余弦距离表示个向量之间的相似度如式所示算法步骤如下步骤将文本预处理后的文本和采用词集合和表示步骤采用式由分别计算词库中的每个词与文本中每个词的相似度将词库中的每个词与文本中词语的最大相似度作为句向量的一维形成句向量和步骤计算和的余弦相似度即实验与结果分析微博文本预处理实验中的微博语料来自新浪微博平台总计爬取约亿条微博及亿条微博评论在前期的文本处理中拣选长度在个字符以上的微博并将每条微博的评论合并后同样截取字符长度超过的微博评论文本共计得到微博及评论集合总条数表方法工程年月日条最后采用将两者相加后的文本进分词处理由于微博文本的特殊性采用与处理普通文本时相同的方法处理微博文本通常难以奏效在对微博短文本进行分词时自己构建了针对微博分词的具有词的用户词典其中包括了大量的新词俚语地名机构名和微博常用词例如拉黑咸吃萝卜淡操心谷歌耐你呵呵笔记君等微博分词中用户词典的使用大大提高了分词的准确性分词前文本及分词后文本示例如下原句明明可以靠脸吃饭偏偏要靠才华笔记君本宝宝爱死你了哈哈哈哈一般分词明明可以靠脸吃饭偏偏要靠才华笔记君本宝宝爱死你了哈哈哈哈加用户词典后分词明明可以靠脸吃饭偏偏要靠才华笔记君本宝宝爱死你了哈哈哈哈对微博文本进行分词及去停用词等预处理后采用成熟的语料开始训练模型一个好的词向量模型对后续的研究至关重要在大量的实验中发现要想得到一个较高的模型训练语料的选取尤为重要本文所训练的模型将用于微博文本处理所以采用的原语料全部来自微博并且使训练语料的规模尽可能得大本文所采用的语料达到另外训练参数的选择也比较重要特别是和的选择本文分别选择和训练模型后采用方法和对微博常用语求取相似度词语集合的方法去验证本文模型的好坏如表所示其中国王女王女人表示国王女王女人模型测试国王女王女人男人男人心绅士的毛泽东毛主席开国邓小平从表的结果可以看出在的经典示例中本文的模型表现较好能够很好地得到结果男人并且其结果词集总体效果也更好实验中为选出的用来在计算文本相似度的示例文本另外针对方法特别地选出一个长文本进行比较测试长文本组合为今天天气真好很适合出去运动今天天气可真好万里无云非常适合出去运动巴黎恐怖袭击话筒扩散周知爆炸瞬间的逃生法则伴随巨响爆炸导致的冲击波破片及高温可能瞬间致命愿灾难和恐怖袭击别再发生但一旦遭遇危机正确的逃生法则却能换来一线生机戳图了解转给更多人巴黎恐怖袭击扩散每个人都应知道的反恐防恐常识日巴黎遭遇严重恐怖袭击数百人死伤愿灾难不再但我们都应了解防恐常识怎样识别可疑人物和爆炸物遇到刀斧砍杀袭击如何躲避公共汽车上遇到纵火恐怖袭击怎么逃生遇到枪击如何选掩蔽物戳图了解为生命安全转人民日报第卷第期段旭磊张仰森孙祎卓微博文本的句向量表示及相似度计算方法研究背包去旅行当我再次踏上黄山带着朝圣的心情祈求能在岁月流转间遇见她的另一张面容还好得到了幸运之神的眷顾让我看到了醉美的日出从祈祷能有日出到凌晨摸黑去等待从在山顶悬崖边焦急等待到太阳升起时的震撼瞬间无不深深地印刻在我的脑海中一片叶子中国摄影师联盟新浪旅游交大周年校庆美哉交通大学百载华章壮哉西迁精神万世荣光风云两甲子弦歌三世纪祝交大双甲子生日快乐西安交通大学连巴黎都被恐怖袭击了恐怖分子真是越来越猖狂都是无辜百姓真是太可恶真的看完热门评论顿时觉得这世界不会再好了还有好些人质呢这些人太丧心病狂了听说那个区中国人多希望平祈祷祈祷祈祷真安旅行成了人类最奢侈的事能庆幸能生在我大天朝保命的地方太少了你要注意安全昨天才看完茶花女哦今天就发生恐怖袭击你叫我对巴黎情何以堪恐怖分子该死恐怖分子恐怖袭击注意安全强烈谴责暴行恐怖分子是全世界人民的公敌恐怖分子应从这个地球消失美国你有时间搅和南海为什么没时间做做正事你不是要当老大吗那就带头行动起来呀祈祷每次看到这种我都庆幸自己在中国太可怕泪泪泪惟愿平安悲伤还是在中国安全一点好心疼好好的地方怎么就变这样了想起去年还优哉游哉的在街道上走着呢人的心一旦被恶魔侵蚀了后果真恐怖在法留学狗已经吓傻恐怖分子处死了个中国留学生好难过泪泪比恐怖袭击更恐怖的罪行多了穆斯林被大规模屠杀的时候怎么不来说说信仰问题黑人被屠杀的时候怎么不说信仰问题他们有错么他们不也是无辜的生命那么多恐怖罪行怎么不提信仰问题反对恐怖袭击保护和平这是全世界都该做的事我也恨不得这些恐怖分子全部死光但是为什么要上升到宗教信仰上回复江左萌萌主江左没狼说的好像被东突分子杀害的都活着一样全世界人民强烈谴责恐怖袭击实验数据在下列个实验中实验实验是根据第节算法生成的实验数据实验为根据文献进行实验后得到的结果用以对比本文的种算法实验采用第节算法对例句及对应的进行扩展然后采用方法进行微博文本相似度计算得到的结果如表所示表实验相似度结果模型数据数据扩展从实验结果可以看出这个方法不能处理短文本只能处理特别长的文本并且效果也不是很好在实验中根据的特点采用文本扩展的方法用来提高文本之间相似度计算的效果但是扩展功能的增加不能改变这种方法对短文本较差的结果反而对于长文本对其文本相似度计算的效果有所提高实验采用第节算法对例句及对应的进行预处理并求取词向量后将词向量相加形成句向量计算微博文本之间的相似度后得到的结果如表所示表实验相似度结果模型数据词向量相加的模型从实验结果可以看出此方法比实验方法效果好其中对长文本的效果明显较好而且短文本相似度计算的效果比实验好但是效果并不理想实验利用常用词词库计算个微博文本之间的相似度分别计算维中每一维与分词后文本中每个词的相似度取每一维与文本分词后词语相似度的最大值形成新的维向量代表每一个文本利用此向量的距离计算个文本之间的相似度其中其结果如表所示表模型实验相似度结果数据数据从实验结果可以看出该方法与其他方法相比长文本相似度效果有所提高而且这种方法计算出来的相似度对相似的文本比较有效果对差别大的文本区分也较明显通过实验可以发现文本相似度的计算和词库息息相关分别采用词库进行计算对比发现词库在左右时的效果最好而这词库的选取则是采用分布式计算从整个实验语料中提取了词频最高的前个词语实验本文实验采用文献方法与前个实验进行对比直接采用预处理后语料对微博文本训练句向量形成句向量模型采用句向量模型计算句子之间计算机相似度实验采用的语料规模即文本的数量分别实验结果如表所示为表实验相识度结果模型数据数据数据实验的实验结果表明该方法短文本效果比长文本效果好但短文本的总体效果也不理想对所有短文本的相似度值普遍较高长文本的相似度值普遍较低而且文本相似度的计算与整体语料的大小息息相关并且存在不确定性从实验结果中可以看出随着实验语料的增大文本之间相似度的效果有所波动但是总体效果也不理想存在较大不确定性从实验数据来看其效果不如实验最后将组实验的数据进行汇总形成表经过将每组实验示例文本进行反复对比及志愿者对每组示例文本相似度值的评分赋予每组示例文本一个标准相似度值从表的汇总结果可以看出实验的数据最接近标准值特别说明的是由于本文所有实验的基础是建立在上亿条微博数据上其算法计算量较大特别是实验也正因为此本文采用了通用并行计算框架来存储分析数据表实验结果汇总实验实验数据实验数据实验数据实验数据实验数据实验数据实验数据实验数据标准值结束语本文提出了计算微博文本相似度的种方法从实验结果可以看出在这种方法中使用词库映射作为文本向量的方法效果较好且此方法与直接计算句向量进行文本相似度计算的方法相比效果也较佳在计算词语相似度时由于一个词的义项较少因此用这种基于共现的方法能取得较好的效果但本文方法也存在一定的问题对于文本由于其精细度较高即使绝大部分词语相同整句话的意思也很可能不相同所以文本级别的训练仍然是一工程年月日个公认的难题下一步将继续改进高维词库映射方法当词库中的词与微博文本中多个词相似度最大且相等时应选择哪个词的义项作为合适的词语语义参考文献刘铭吴冲刘远超等基于特征权重量化的相似度计算方法计算机学报朱嫣岚闵锦周雅倩等基于的词汇语义倾向计算中文信息学报黄承慧印鉴侯昉一种结合词项语义信息和方法的文本相似度量方法计算机学报徐琳宏林鸿飞杨志豪基于语义理解的文本倾向性识别机制中文信息学报王小林王东杨思春等基于知网的词语语义相似度算法计算机工程张剑峰夏云庆姚建民微博文本处理研究综述中文信息学报编辑索书志
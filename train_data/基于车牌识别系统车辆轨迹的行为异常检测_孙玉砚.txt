计算机研究与发展基于车牌识别系统车辆轨迹的行为异常检测孙玉砚孙利民朱红松周新运物联网信息安全技术北京市重点实验室中国科学院信息工程研究所北京中国科学院大学北京但是在公共安全领域的异常行为检摘要目前已有很多面向智能交通管理的车辆异常行为检测方法测研究不足为此提出了一种基于车牌识别系统车辆轨迹的行为异常检测机制通过车牌识别系统获取抓拍记录分析各个车辆在系统卡口的历史通行记录提取车辆轨迹的时间空间特征通过空间特征发现异常路线并计算路线的围绕质心累积转动角度值检测徘徊行为用聚类算法获得时间特征的聚类中心并计算离群点检测特殊时间活跃行为利用实际部署的车牌识别系统收集的数据测试了所提出的异常检测方法实验结果表明该检测方法能够很好地检测面向公共安全领域的车辆异常行为在卡口设备识别率不理想的情况下有效地提高了异常检测率修回日期收稿日期国家科技支撑计划基金项目中国科学院战略基金项目国家八六三高技术研究发展计划基金项目性先导科技专项计算机研究与发展数据挖掘特征向量聚类算法轨迹分析关键词异常检测中图法分类号近年来中国道路上车辆数量增加异常迅猛近年年均增加多万辆截至年底总量突交通状况例如文献利用出租车轨迹提取破亿辆共有个城市的保有量超过万分布信息文献利用车辆密度检测拥塞等异常辆交通管理压力和安全风险不断加大监控以及处情况文献利用定位数据检测车辆的超速置突发危机的难度也随之加大因此交通监控保障异常行为基于定位轨迹的异常检测虽然精度安全变得异常紧迫和重要异常车辆行为检测是交很高但成本更高如果要面向公共安全领域监控所通监控管理不可或缺的任务及时发现行为异常的有车辆目前很难给每辆车都额外安装定位装置同车辆并采取相应措施有效的处理不仅会使道路行驶时还要考虑轨迹数据的定期传输收集成本更加安全还可以中止犯罪行为或恐怖袭击活动相关工作出租车的移动速度最终获得城市异常拥挤区域的车牌识别技术是计算机视频图像识别技术在车辆牌照识别中的一种成熟应用已经开始在各个城市推广部署目前的检测率和识别率在理想情况下可达到随着信息化进程的加快和设备成本的降低海量监控摄像头被部署在公路桥梁路口和重点区域各种定位装置如全球定位系统和智能手机被部署在车内车辆的行为轨迹越来越多地被记录下来通过这些智能交通数据人们可以对车辆轨迹的时空信息进行研究对车辆的行为规律进行分析监控整个交通的运行状态一旦检测到有车辆行为异常时就可以提前为之准备采取相应的处置措施异常检测一直是智能交通领域的一个研究热点根据检测技术不同可以分为类基于视频的图像处理技术和基于定位的轨迹数据挖掘技术目前大部分车辆行为异常检测研究都是利用视频图像处理技术直接识别车辆的异常驾驶行为例如检测监控区域发生的交通事故造成拥堵以及车辆违章逆行变道转向蜿蜒超速行驶闯红灯等危险行为或者检测高速道路上的行人自行车等潜在的事故目标只有少量研究针对公共安以上目前对于车牌识别系统记录的数据挖掘处理还处于起步阶段文献利用数据检测车辆尾随也称车辆伴随异常行为文献利用数据预测车辆行驶轨迹使用车牌识别系统记录的车辆轨迹分析检测异常行为的车辆具有以下优点监测记录道路上行驶的所有车辆不需要在每个车辆上安装任何额外的专业设备或硬件在不同的条件下保持较高的检测率包括恶劣天气光线和交通拥塞状况较低的系统安装和维护成本数据收集和处理相对比较容易本文提出了一种基于车牌识别系统车辆轨迹的行为异常检测机制检测面向公共安全领域的特殊时间活跃及徘徊异常行为主要贡献包括提出了一种车辆轨迹时空特征提取方法提出了一种基于围绕质心累计转动角度然加速或者骤停等行为的检测基于视频图像处的异常徘徊行为检测方法以及基于聚类中心点距离理技术的异常检测是分布式的只能针对重点关注的离的几路视频独立的分析目前还无法做到海量视频群点检测在卡口设备识别率不理想的情况下有效协同检测另外只能监控视频可见区域内的异常行地提高了异常检测率全领域例如针对车辆在检查站或重要机构附近突为很难实现道路全程监控基于定位的轨迹数据挖掘是新兴的研究热点轨迹特征值提取车辆轨迹的定位信息获取来源包括车载设备基站定位等定位技术基于定位装置的轨迹分析技通过处理车牌识别系统的记录数据我术大部分都是将海量车辆的轨迹作时间序列切片们可以得到每辆车在所有系统卡口通行的历史记研究各个时间点的交通运行快照检测其中的异常录每一条记录包含抓拍的照抓拍的时间网关的孙玉砚等基于车牌识别系统车辆轨迹的行为异常检测编号抓拍照片中车辆的车牌号码等信息我们分析的主要对象是普通车辆因此需要根据国内车辆的车牌号码编排规则过滤特定的车辆特殊车牌包括警车军车外籍车牌等车牌号码中有特定的标示字符如等特定车辆还包括政府公车出租车公交车等其车牌号码都有预留号段出于隐私保护的考虑我们对过滤后的普通车辆车牌号码使用单向函数进行变换加密接下来我们讨论如何从普通车辆的记录中提取车辆轨迹的空间时间特性如图所示图轨迹特征提取流程示例行程切分卡口的车牌识别相机在检测到车辆的运动后会车辆轨迹用一个多维点序列表示为抓拍大量的图片而根据实际经验在交通拥挤条件其中代表第条记录是该车辆记录的总数按照时间先后下一个车辆有可能被抓拍次或更多次因此需要将行程中的相同卡口的连续记录丢弃掉例如图顺序排列第条记录表示为中第个行程序列内有个卡口的连续记录只有第个记录被保留其他记录被丢弃需要其中是抓拍时间是抓是抓拍卡口编号拍后识别出的车牌号码将轨迹作为一个整体很难提取车辆的行为特征我们将整个轨迹分割成多个子轨迹每个子轨迹代表一个独立的短期行程切分完之后总共个行程轨迹划分独立行程的标准是时间间隔如果个连续的记录的时间间隔超过一个阈值则将这个记录划分到个子轨迹中第个行程用一个多维点序列表示为其中是行程的起点记录是行程的终点记录数量就是行程中记录的数量如图所示该车辆的轨迹被划分为个行程注意的是相同的卡口可以不连续地出现多次例如公交车之类的车辆行驶在往返线路中行程中会多次出现相同的卡口空间特征提取车辆轨迹划分为多个行程后我们可以从行程的路线中提取空间特征第个行程的路径用一个元组表示为其中是行程第个记录的卡口编号元组中卡口的数量就是路径的长度所有行程路径的并集就是该车辆的路线集合表示如下计算机研究与发展路线集合中每一个元素都是该车辆曾经行驶过的一条路径可能只行驶过一次也可能行驶过定义特殊时间活跃度异常行为通常发生在特殊的时间段多次一些有固定行驶线路的车辆例如城市公共汽例如夜间活跃度异常的车辆很可能是潜在的安全威车和班车可能会有很多个行程但是路线集合胁统计某车辆在特殊时间出现的行程次数中只有少量的路径归一化为特殊时间活跃度之后表示为定义路线长度系数路线集合中最大路径长度值表示为最大路径长度的归一化值称为路线长度系数定义如式所示其中其中是该车辆行程的总数车辆在特殊时期越活跃越接近异常检测是阈值车辆行驶线路越长值越接近定义路线稀有系数本文提出的车辆异常行为检测主要针对的是特槡殊时间异常活跃和区域徘徊种异常行为由第对于出现的每种路径将数据集中行驶过该路径的所有车辆的集合称为路径的稀有征值包括路线长度系数路线稀有系数度就是集合中元素的数量表示为上我们提出了个异常检测方法基于围绕质心累路径的稀有度代表曾经有多少辆车行驶过该路径计转动角度的空间异常检测算法基于聚计算车辆路线集合中所有路径的稀有度后我类的时间离群点检测算法们可以获得其中的最小值表示为空间特征异常检测每个路径的路线稀有因素计算方法如式所示其中是稀有度上限阈值节的定义我们可以根据轨迹信息得到车辆的一组特日常活跃度特殊时间活跃度在此基础基于围绕质心累计转动角度的空间特征异常检测算法首先根据车辆轨迹的空间特征值凡是超过该阈值的路线稀有度归一化之后取值为路线长度系数和路线稀有系数挑选候选行驶过该线路的车辆越少值越接近的异常车辆然后计算这些车辆路线的围绕质心累烄烅烆时间特征提取计转动角度判断是否有徘徊行为且路线长度系数超过阈值时该车辆将成为候选异常车辆意味着该车辆行驶的路线车辆轨迹划分为多个行程后我们根据每个行程的时间提取时间特征车辆轨迹的时间序列是一个有序的元组表示为其中是第个行程第条记录的时间从长期来看车辆常常在某些日期出现或者在某些时刻活动定义日常活跃度假定收集的数据集有天在天的时间里车辆活跃度列表表示为其中是车辆在第天的活跃情况如果车辆轨迹的时间序列中有第天的行程记录即车辆在第个日期出现过则取值为否则取值为在此我们使用快速傅里叶变换处理车辆活跃度列表计算公式如式所示傅里叶系数的乘方定义为每个车辆的日常活跃度表示为当车辆轨迹的路线稀有系数超过阈值很少有其他车辆行驶过并且该车辆行驶的路线路径比较长有可能检测出徘徊行为候选车辆的第个路径其中是路径长度路径中第个卡口的地理坐标为则路径质心的地理坐标为表示为路径围绕质心累计转动角度计算方法如式所示槡槡在图中车辆行驶路线为路线的质心为则围绕质心的累计转动角度如果计算结果孙玉砚等基于车牌识别系统车辆轨迹的行为异常检测超过一定阈值则可以判定该车辆在该区域内徘计算训练集特征空间各个聚类的质心表示为徊行为异常其中是聚类的个数计算数据库中每个车辆的特征值向量与特征空间质心集合中各个聚类质心的距离距离计算采用欧氏距离公式如式所示槡我们挑选那些与各个质心的距离都超过一定阈值的离群点这些离群点就是异常检测结果基于聚类中心点距离的时间离群点检测算法描述如下算法输入全部车辆号码列表训练集车辆号码列图计算示例行程路线为基于围绕质心累计转动角度的空间异常检测算法过程描述如下算法输入普通车辆号码列表车辆轨迹特征向量映射表车辆路线集合映射表路线长度系数阈值路线稀有系数阈值累计转动角度阈值输出是具有徘徊行为的车辆列表从获取路线稀有系数且从获取当前车牌号码的路线集合按式计算角度将车牌号加入到列表中瑏瑠表车辆轨迹特征向量映射表离群点距离阈值聚类数目算法迭代次数输出检测的离群点列表根据构造训练集的特征空间数组算法对进行聚类聚类数使用目为迭代次数为获取聚类中心点列表从获取当前车牌号码的特征向量将车牌号码加入离群点列表计算与的距离按式将从离群点列表中删除瑡瑏瑢瑏瑣瑏瑤返回离群点列表瑏实验结果及分析数据集瑏瑡经过某市相关部门许可我们从该市已经实际运瑏瑢瑏瑣返回列表行的系统收集了从的系统后台数据该系统包括了时间特征异常检测基于聚类中心点距离的时间个前端抓拍摄像头这些摄像头部署在个卡口具体卡口位置如图中地理信息系统特征异常检测算法分为个阶段选择一部分典型车辆及其轨迹时间特征值地图圆点所示实验使用作为训练集车辆轨迹的时间特征向量表示为的数据集包括了文本记录和相应的车辆正然后使用面抓拍照片文件聚类算法方法计算机研究与发展由于车牌识别系统的识别率达不到原参数确定始数据还需要通过数据清洗在这内记在该区域内的实际驾驶测试中在高峰时刻最录的总数超过亿大约有万个车牌号码被远的个卡口之间的行驶时间约这意味着抓拍并成功识别在原始数据中未识别记录的占比在一个短途行程的车牌识别记录间隔不超过为重复记录的占比为此外根据车此外我们计算并统计了所有车辆轨迹的连续记录的时间间隔其分布情况如图所示约牌号码规则过滤了超过万个特定车牌号码保留了将近万辆车的轨迹数据的时间间隔值小于因此分割行程的时间间隔阈值图步长为时轨迹记录的时间间隔数值分布情况图车牌识别系统实际部署为了评估空间异常检测算法的性能我们使用模拟仿真数据集测试在该市地图数据不同时段的交通流量统计如图所示的车辆如家用轿车等在日间行驶而夜间行驶的车辆较少特殊时间活跃度的特殊时间定义为夜间点的基础上生成个环形的路径其中一条路径如图中环形路径所表示其测试路径中途经过个卡口模拟测试车辆在每个环形路径上行驶圈为了评估空间异常检测算法的性能我们使用真实数据测试选择时检测出的离群点的轨迹数据时间特征异常检测算法训练数据的具体选择过程直接影响其聚类中心进而影响异常检测结果道路上出现的出租车公交车及公务车已经被过滤本文使用人工手动标注图像中车辆的车型筛选出了比较常见的类车辆类型包括本市上下班通勤家用的小客车外地出差旅游的小客车本市货运的卡车外地长途货运的卡车载客的大中型客车通过查看车辆的证明抓拍图片及历史轨迹最终挑选万辆正常车辆包括万辆市内小型客车万辆外地小型客车万辆本市卡车万辆外地卡车万辆大中型客车图不同时段的记录所占百分比根据所有多万种行程路径长度数值的统计结果以上的路径长度为不足的路径长孙玉砚等基于车牌识别系统车辆轨迹的行为异常检测度超过因此式中计算路线长度系数的阈值式中计算路程稀有度的阈值即如果一个路线曾经有超过辆车行驶过则该路线的稀有度为空间特征异常检测算法中挑选候选异常车辆的路线稀有系数阈值路线长度系数阈值累计转动角度阈值即车辆围绕质心行驶超过圈则判定该路线是异常的徘徊路线时间特征异常检测算法中阈值即如果车辆的特征向量距离其他分簇中心的最小距离超过则判定该车辆在特定时刻活动异常异常检测性能分析车辆轨迹提取特征值的分布情况如图所示左右的车辆其数值接近于意味着只出现过的车辆数值为也就是从未在特定时刻行驶过的车辆数值小于意味着这些车辆的行驶路线长度基本不超过个卡口的车辆数值接近于意味着这些车辆的行驶路线都是常见路线图时间离群点检测结果示例长途卡车通常在夜间行驶数值接近的分簇基本是本市卡车左下角和数值都较低的分簇基本是外地小客车出现频率较低且通常在日间行驶左上角的分簇基本是本市小客车数值较高而数值较低左侧中间的分簇基本是本市大中型客车图中白色空心圆点是各个分类的中心点黑色正六边形点是检测出的离群点其与各个中心点的距离超过使用该算法对其余万辆车的轨迹数据进行检测共检测出个离群点空间异常检测算法结果的示意图如图所示图中黑色的正六边形就是线路稀有系数与路线长度系数满足阈值同时围绕质心累计转动角度大于的异常车辆使用该算法共检测出异常车辆万个异常的路径万多条由于在实验中检测到的区域徘徊车辆数量较多因此我们选择了其中一部分活跃度比较高的车辆分析这些车辆的图车辆轨迹提取的特征值分布情况步长为时间离群点检测算法结果的示意图如图所示图中使用算法对训练集内万辆车的时间特征向量进行分类分类数迭代次数图中数值最大的一个分簇基本是外地图空间异常检测结果示例计算机研究与发展抓拍图片后发现其中比较活跃的异常徘徊行为是无行为异常检测机制检测面向公共安全领域的特殊营业执照的黑出租车载客造成的时间活跃及徘徊异常行为主要贡献包括提出了一基于车牌识别系统的异常检测的检测率与系统种车辆轨迹时空特征提取方法提出了一种基于围的识别率密切相关如图所示我们测试了不同识绕质心累计转动角度的异常徘徊行为检测别概率下空间异常检测算法以及时方法以及基于聚类中心点距离的间离群点检测算法的检测率为了对比我们还实现离群点检测在卡口设备识别率不理想的情况下有了基于最长重复子串效地提高了异常检测率的徘徊异常检测算法如果车辆的线路中最长重复子序列的长度大于等于则判定车辆行为异常虽然本文提出异常行为检测取得了比较精确的检测结果但仍然存在一些问题和改进之处车牌识别系统的检测率和识别率高低会影响异常行为检测的准确性因此未来的工作将集中于处理分析大量未识别的记录保证车辆轨迹的完整性和正确性参考文献图异常检测算法的检测率性能测试中假设车牌识别系统的准确率为也就是每次车辆行驶经过卡口时被抓拍和识别的概率为因此以概率保留每一条记录最终生成一个新的轨迹序列作异常检测图中系统识别概率从到步长等于在每个识别概率下生成万个新测试集计算其中依然被检测出异常的轨迹数量就是相应的检测率由图可以看出空间异常检测算法受车牌识别系统识别率的影响较小因此在恶劣天气或者夜间等对车牌识别系统不利的条件下也有较高的检测率能够检测出徘徊异常行为时间离群点检测算法与识别率基本成线性关系较低的识别率会导致离群点检测结果发生较大差异而作为对比的基于最长重复子串的徘徊异常检测算法受车牌识别系统识别率的影响很大在车牌识别邱凌赟韩军顾明车道模型的高速公路车辆异常行为检率为的情况下检测率只有测方法计算机应用结束语本文提出了一种基于车牌识别系统车辆轨迹的孙玉砚等基于车牌识别系统车辆轨迹的行为异常检测吴子珺于重重孙利民一种针对特定车辆潜在群体的行驶轨迹预测方法计算机应用研究